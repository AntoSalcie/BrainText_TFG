<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>BrainText</title>
  <link rel="icon" type="image/png" href="css/imagenes/brain.png" />
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="css/simple-sidebar.css" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
    crossorigin="anonymous"></script>
</head>

<body style="background-image: url(fondo.png);background-repeat: no-repeat;background-position: all;background-attachment: fixed;background-size: 100%;">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-dark bg-dark">

          <button class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#bs-example-navbar-collapse-1">
            <span class="navbar-toggler-icon"></span>
          </button> <a class="navbar-brand" href="#">BrainText</a>
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="navbar-nav">
              <li class="fa fa-github" aria-hidden="true">
                <a class="nav-link" href="https://github.com/AntoSalcie/BrainText_TFG.git">Github <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.linkedin.com/in/antoninosalcie">Linkedin</a>
              </li>

            </ul>
          </div>
        </nav>
        <div class="jumbotron" style="background-image: url(imagenanalizer.png);background-repeat: no-repeat;color: white;">
          <h3>
            Analizador de textos
          </h3>
          <div>
            <span>Inserta tu texto aqui</span>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="card card-body" ><textarea id="escritura"></textarea></div>
              <input type="file" id="ficheros" onchange="infofichero()" multiple />



            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-2">
            <h3>
              <a id="Nombre" onclick="nombres()" class="btn btn-dark" data-toggle="collapse" href="#nombres"
                role="button" aria-expanded="false" aria-controls="collapseExample">
                Nombres</a>

            </h3>

            <div class="collapse" id="nombres">
              <div class="card card-body">
                <p id="textnombres"></p>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <h3>
              <a class="btn btn-dark" onclick="emails()" data-toggle="collapse" href="#Emails" role="button" aria-expanded="false"
                aria-controls="collapseExample" >
                Emails</a>
            </h3>
            <div class="collapse" id="Emails">
              <div class="card card-body" >
                  <p id="em"></p>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <h3>
              <a class="btn btn-dark" onclick="fecha()" data-toggle="collapse" href="#Fecha" role="button" aria-expanded="false"
                aria-controls="collapseExample">
                Fecha</a>
            </h3>
            <div class="collapse" id="Fecha">
              <div class="card card-body">
                <p id="fe"></p>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <h3>
              <a class="btn btn-dark" onclick="tipologia()" data-toggle="collapse" href="#Tipologia" role="button" aria-expanded="false"
                aria-controls="collapseExample">
                Tipologia</a>
            </h3>
            <div class="collapse" id="Tipologia">
              <div class="card card-body">
                <p id="texttipo"><p>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <h3>
              <a class="btn btn-dark" onclick="numeros()" data-toggle="collapse" href="#Numero" role="button" aria-expanded="false"
                aria-controls="collapseExample">
                Numeros</a>
            </h3>
            <div class="collapse" id="Numero">
              <div class="card card-body">
                <p id="num"><p>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <h3>
              <a class="btn btn-dark" onclick="tarjetas()" data-toggle="collapse" href="#Card" role="button" aria-expanded="false"
                aria-controls="collapseExample">
                Tarjeta de credito</a>
            </h3>
            <div class="collapse" id="Card">
              <div class="card card-body">
                <p id="card"><p>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Menu Toggle Script -->
  <script>
    $("#menu-toggle").click(function (e) {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");
    });

    //---------------------------------------------------------------------------------
    function emails() {
      let mensaje = document.getElementById("escritura").value;
      let regexpr = /\w+@\w+.\w+/g;
      console.log(mensaje);
      let resultado = mensaje.match(regexpr);
      let final;
      for (var i = 0; i < resultado.length; i++) {
        final = resultado + ',';
      }
      document.getElementById("em").innerHTML = resultado;
    }
    function fecha() {
      let mensaje = document.getElementById("escritura").value;
      regexpr = /(?:3[01]|[12][0-9]|0?[1-9])([\-/.])(0?[1-9]|1[1-2])\1\d{4}/g;
      let resultado = mensaje.match(regexpr);
      for (let i = 0; i < resultado.length; i++) {
        if (mensaje == resultado) {
          resultado = resultado + ',';
        }
      }
      document.getElementById("fe").innerHTML = resultado;
    }

    function nombres(){
				const mensaje = document.getElementById("escritura").value;
  				var chicos = ["Pedro", "Luis", "Andrés", "Javier", "Jorge", "Alberto", "Manuel","Francisco", "Julio", "Nestor", "Josue", "Joshua", "Horacio", "Gonzalo","Lucas", "Hugo", "Andrés", "Angel", "Jorge", "Álvaro", "Leo","Alejandro", "Martín", "Danilo", "Daniel", "Leonel", "Adam", "Mohamed "];
				var chicas = ["Ana", "Julia", "Noelia", "Berta", "Luisa", "Margarita", "Maria","Veronica", "Nicole", "Alba", "Emma ", "Yasmin", "Carol", "Perla","Carmen", "Mila", "Berta", "Paula", "Rocio", "Daniela","Sofía","Virginia"];

				var regular = chicos.toString().replace(/,/g, '|') + "|" + chicas.toString().replace(/,/g, '|');
				var modificador = "gim";
				var rg = new RegExp(regular,modificador);
				document.getElementById("textnombres").innerHTML = mensaje.match(rg);

			}

    // Tarjetas de credito

    function tarjetas() {
      let mensaje = document.getElementById("escritura").value;
      let regexprv = /^3[47][0-9]{13}$/;
      let regexprm = /^5[1-5][0-9]{14}$/;
      let resultadov = mensaje.match(regexprv);
      let resultadom = mensaje.match(regexprm);



      if (!resultadom) {
        document.getElementById("card").innerHTML = "Hemos encontrado una visa";
      }else{
        document.getElementById("card").innerHTML = "Hemos encontrado una mastercard";
      }

      }


    // tipologia

    function tipologia(){
				const mensaje = document.getElementById("escritura").value;
				var positivas = ["alegría", "bueno", "mejor", "perfecto", "genial", "conseguido", "feliz"];
				var negativas = ["maldad", "perdido", "triste", "nefasto", "crisis", "caos", "perdida"];

				var regular = positivas.toString().replace(/,/g, '|') + "|" + negativas.toString().replace(/,/g, '|');
				var modificador = "gim";
				var rg = new RegExp(regular,modificador);

				if( mensaje.match(rg) != null ){
					var contadorpositivas = 0;
					var contadornegativas = 0;

					for(i=0;mensaje.match(rg).length>i;i++){

						for(j=0;positivas.length>j;j++){
							if( mensaje.match(rg)[i].toUpperCase() == positivas[j].toUpperCase() ){
								contadorpositivas++;
							}
						}


						for(j=0;negativas.length>j;j++){
							if( mensaje.match(rg)[i] == negativas[j] ){
								contadornegativas++;
							}
						}

					}

					var total = contadorpositivas + contadornegativas;

					var porcentajepositivas = (contadorpositivas * 100) / total;
					var porcentajenegativas = (contadornegativas * 100) / total;

					if( porcentajepositivas != NaN ){
						document.getElementById("texttipo").innerHTML = "Porcentaje positivas: " + porcentajepositivas + ".\n";
						document.getElementById("texttipo").innerHTML += "Porcentaje negativas: " + porcentajenegativas + ".\n";

						if( porcentajenegativas>porcentajepositivas ){
							document.getElementById("texttipo").innerHTML += "El texto es negativo.";
						}else if( porcentajenegativas<porcentajepositivas ){
							document.getElementById("texttipo").innerHTML += "El texto es positivo.";
						}else{
							document.getElementById("texttipo").innerHTML += "El texto es neutral.";
						}
					}

				}else{
					//Limpiar el textarea de tipología en caso de que haya escrito palabras positivas o negativas previamente
					//y borrase el contenido del textarea principal, haciendo que se limpie el contenido del text area de
					//tipologia.
					document.getElementById("texttipo").innerHTML = "";
				}
			}
    // no suma numeros negativos
    function numeros() {
      let mensaje = document.getElementById("escritura").value;
      let regexpr = /\d+/g;
      let resultado = mensaje.match(regexpr);
      let suma = 0;
      for (let i = 0; i < resultado.length; i++) {
        let num = parseInt(resultado[i]);
        suma = suma + num;
      }
      document.getElementById('num').innerHTML = "La suma total de los números es: "+suma;
    }

    function infofichero(event) {

                if (!(window.File)) {
                    console.log('El navegador no soporta API File');
                    return;
                }

                var fichero;
                var lectura = new FileReader();
                var archivos = document.getElementById('ficheros').files;

                for (var i = 0; i < archivos.length; i++) {
                    fichero = archivos[i];
                    lectura.onloadend = onFileLoaded;
                    lectura.readAsBinaryString(fichero);
                }
            }

            function onFileLoaded(event) {
                document.getElementById("escritura").innerHTML = event.currentTarget.result;
            }

  </script>

</body>

</html>
